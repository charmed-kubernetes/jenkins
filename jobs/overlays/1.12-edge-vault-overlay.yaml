applications:
  kubernetes-master:
    options:
      channel: 1.12/edge
  kubernetes-worker:
    options:
      channel: 1.12/edge
  easyrsa:
    # it's currently not possible to remove an application in an overlay
    num_units: 0
    to: []
  vault:
    charm: cs:~openstack-charmers-next/vault
    num_units: 1
    options:
      auto-generate-root-ca-cert: true
      totally-unsecure-auto-unlock: true
  percona-cluster:
    charm: cs:percona-cluster
    num_units: 1
    options:
      innodb-buffer-pool-size: '256M'
      max-connections: '1000'
relations:
  - ['vault:shared-db', 'percona-cluster:shared-db']
  - ['vault:secrets', 'kubernetes-master:vault-kv']
  - ['etcd:certificates', 'vault:certificates']
  - ['kubernetes-master:certificates', 'vault:certificates']
  - ['kubernetes-worker:certificates', 'vault:certificates']
